# Курсовой проект: Система онлайн-бронирования "CuWorking"

## Ссылка на техническое задание

[ТЗ на GitLab](https://git.culab.ru/bsc-development-basics-2nd-semester/dev-basics-2025-longreads/-/tree/main/course-project?ref_type=heads)

---

## Как запустить проект

Для старта всех компонентов (backend, frontend, база данных) и автоматического запуска тестов выполните в корне репозитория:

```bash
docker-compose up --build
```

В результате будут подняты:
- **Backend (Flask)** — доступен по адресу: `http://localhost:5000`.
    - Swagger UI для тестирования и просмотра API: `http://localhost:5000/apidocs`.
- **Frontend (React + Vite)** — пользовательский интерфейс: `http://localhost:3000`.
- **PostgreSQL** — база данных, порт для подключения с хоста: `5433` (внутри Docker — `5432`).
- **Тестовый сервис** — автоматически прогоняет тесты с помощью Pytest и Testcontainers, используя временный контейнер PostgreSQL.

---

## Данные для входа администратора

После первого запуска автоматически создаётся администратор:
- **Имя пользователя:** `admin`
- **Пароль:** `admin123`

---

## Что проверять

### Backend (API)
- **Аутентификация и права:**
    - Используется Basic Auth.
    - Есть разграничение между обычными пользователями и администраторами.
- **Основные сущности:** `User`, `Place`, `Booking`.
- **Ключевые API-эндпоинты (см. Swagger):**
    - Регистрация (`/api/register`), просмотр профиля (`/api/users/me`).
    - Операции с местами: добавление, просмотр, удаление (`/api/places`, `/api/admin/places/<id>`).
    - Бронирование, перенос, отмена (`/api/bookings`, `/api/bookings/<id>/move`, `/api/bookings/<id>/cancel`).
    - Просмотр своих бронирований.
    - Админ-функции: управление пользователями и местами.
- **Документация API:** Swagger UI по адресу `http://localhost:5000/apidocs`.

### Frontend (React)
- **Работа через API:** Все действия пользователя реализованы через запросы к backend.
- **Навигация и страницы:**
    - Главная, вход, регистрация.
    - Список и подробности мест.
    - Для авторизованных: "Мои бронирования", "Добавить место".
    - Для админов: "Все места (Админ)", "Все пользователи (Админ)".
- **Доступ:** Защищённые маршруты для пользователей и администраторов реализованы корректно.

### Тесты
- **Автоматический запуск:** Все тесты стартуют автоматически при запуске docker-compose.
- **Покрытие:**
    - Интеграционные тесты для всех основных API находятся в `backend/tests/`.
    - Для тестирования используется отдельный контейнер PostgreSQL (testcontainers), что обеспечивает изоляцию и приближённость к production.
- **Изоляция:** Каждый тест работает с отдельной сессией и чистой схемой БД (см. `backend/tests/conftest.py`).

---